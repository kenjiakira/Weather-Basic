<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weather Forecast</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        body {
            background: url("assets/images/background/background.jpg") no-repeat center center fixed;
            background-size: cover; 
            min-height: 100vh;
            color: white;
            background-attachment: fixed; 
        }

        body::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.2);
            z-index: -1; 
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.6);
        }

        .random-weather {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 10px;
        }

        .search-section {
            text-align: center;
            margin: 50px 0;
        }

        .slogan {
            font-size: 36px;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .search-container {
            position: relative;
            display: inline-block;
            margin-right: 10px;
        }

        .search-box {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .language-selector {
    position: absolute;
    top: 20px;
    right: 20px;
    background-color: rgba(0, 0, 0, 0.5);
    border-radius: 5px;
    padding: 10px;
    z-index: 10;
}

.language-selector select {
    background-color: rgba(255, 255, 255, 0.8);
    color: #000;
    padding: 5px 15px;
    border: none;
    border-radius: 5px;
    font-size: 14px;
    cursor: pointer;
}

.language-selector label {
    font-size: 14px;
    color: white;
    margin-right: 10px;
}


        .search-input-group {
            position: relative;
            display: inline-block;
        }

        input[type="text"] {
            padding: 12px 40px 12px 20px;
            width: 500px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            background: rgba(255, 255, 255, 0.8);
        }

        .search-button {
            position: absolute;
            right: 5px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #000000;
            cursor: pointer;
            padding: 8px;
            transition: background 0.3s ease; 
        }

        .gps-button {
            width: 45px;
            height: 45px;
            border: none;
            border-radius: 50%;
            background: #434344;
            color: white;
            cursor: pointer;
            transition: 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .gps-button:hover {
            background: #9e9e9e;
        }

        .weather-info {
            display: none;  
            max-width: 600px;
            margin: 0 auto;
            position: relative;
            opacity: 0;  
            transition: opacity 1s ease-in-out; 
        }

        .weather-info.show {
            display: block;  
            opacity: 1;  
        }

        .loading {
            display: none;
            text-align: center;
            margin: 20px 0;
            position: absolute;
            top: 10%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 999;
        }

        .current-weather {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            margin-bottom: 30px;
        }

        .weather-icon {
            width: 100px;
            height: 100px;
            margin: 20px 0;
        }

        .temperature {
            font-size: 48px;
            margin-bottom: 10px;
        }

        .forecast {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 20px;
            margin-top: 30px;
        }

        .forecast-day {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 15px;
            text-align: center;
        }

        .language-selector select {
    background-color: transparent;
    border: none;
    padding: 5px;
    font-size: 16px;
    color: rgb(255, 0, 0);
    display: flex;
    align-items: center;
}

.language-selector img {
    margin-right: 8px;
}
    

        .suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border-radius: 0 0 15px 15px;
            overflow: hidden;
            z-index: 1000;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .suggestion-item {
            padding: 10px 20px;
            cursor: pointer;
            color: #333;
            transition: 0.3s;
        }

        .suggestion-item:hover {
            background: #f0f0f0;
        }

        .loading {
            display: none;
            text-align: center;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            body {
                background: url("assets/images/background/background-lower.jpg") no-repeat center center fixed;
                background-size: cover;
            }
            .slogan {
                font-size: 24px;
            }

            input[type="text"] {
                width: 250px;
            }

            .forecast {
                grid-template-columns: repeat(4, 1fr);
                gap: 10px;
            }
        }

        @media (max-width: 480px) {
            body {
                background: url("assets/images/background/background-lower.jpg") no-repeat center center fixed;
                background-size: cover; 
            }
            .forecast {
                grid-template-columns: repeat(2, 1fr);
            }
        }


    </style>
</head>
<body>
    <div class="language-selector">
        <label for="language">Language:</label>
        <select id="language" onchange="changeLanguage()">
            <option value="en"><img src="https://imgur.com/DVmcW1A.png" alt="English" style="width: 20px; height: 15px;"> English</option>
            <option value="vi"><img src="https://imgur.com/YgPpdOb.png" alt="Vietnamese" style="width: 20px; height: 15px;"> Vietnamese</option>
            <option value="fr"><img src="https://imgur.com/upIHZ66.png" alt="French" style="width: 20px; height: 15px;"> French</option>
            <option value="zh"><img src="https://imgur.com/DVmcW1A.png" alt="Chinese" style="width: 20px; height: 15px;"> Chinese</option>
        </select>
    </div>
    <div class="container">
        <header>
            <div class="logo">WeatherPro</div>
            <div class="random-weather" id="randomWeather">
                Loading random location...
            </div>
        </header>
        <div class="search-section">
            <h1 class="slogan">The Only Weather Forecast You Need</h1>
            <div class="search-box">
                <div class="search-input-group">
                    <input type="text" id="searchInput" placeholder="Enter city name...">
                    <button class="search-button" onclick="searchWeather()">
                        <i class="fas fa-search"></i>
                    </button>
                    <div class="suggestions" id="suggestions"></div>
                </div>
                <button class="gps-button" onclick="getCurrentLocation()" title="Use current location">
                    <i class="fas fa-map-marker-alt"></i>
                </button>
            </div>
        </div>

        <div class="loading" id="loading">
            <i class="fas fa-spinner fa-spin"></i> Loading...
        </div>

        <div class="weather-info" id="weatherInfo">
            <div class="current-weather">
                <h2 id="cityName">City Name</h2>
                <img src="" alt="Weather Icon" class="weather-icon" id="weatherIcon">
                <div class="temperature" id="temperature">--°C</div>
                <div id="description">Weather Description</div>
                <div id="details">
                    Humidity: --% | Wind: -- km/h | Cloud cover: --%
                </div>                
            </div>

            <div class="forecast" id="forecast">
            
            </div>
        </div>
    </div>

    <script>
        const API_KEY = '1230a8fdc6457603234c68ead5f3f967';
        const RANDOM_CITIES = ['London', 'Tokyo', 'New York', 'Paris', 'Sydney', 'Dubai', 'Singapore', 'Moscow'];

        async function getRandomWeather() {
            const randomCity = RANDOM_CITIES[Math.floor(Math.random() * RANDOM_CITIES.length)];
            try {
                const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${randomCity}&appid=${API_KEY}&units=metric`);
                const data = await response.json();
                document.getElementById('randomWeather').innerHTML = `
                    ${randomCity}: ${Math.round(data.main.temp)}°C, ${data.weather[0].main}
                `;
            } catch (error) {
                console.error('Error fetching random weather:', error);
            }
        }

        function getCurrentLocation() {
            if (navigator.geolocation) {
                document.getElementById('loading').style.display = 'block';
                navigator.geolocation.getCurrentPosition(
                    position => {
                        getWeatherByCoords(position.coords.latitude, position.coords.longitude);
                    },
                    error => {
                        alert('Error getting location. Please try searching by city name.');
                        document.getElementById('loading').style.display = 'none';
                    }
                );
            } else {
                alert('Geolocation is not supported by your browser');
            }
        }

        async function getWeatherByCoords(lat, lon) {
            try {
                const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric`);
                const data = await response.json();
                displayWeather(data);
                getForecast(lat, lon);
            } catch (error) {
                console.error('Error fetching weather:', error);
                alert('Error fetching weather data');
            }
            document.getElementById('loading').style.display = 'none';
        }

        async function searchWeather() {
            const city = document.getElementById('searchInput').value;
            if (!city) return;

            document.getElementById('loading').style.display = 'block';
            try {
                const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${API_KEY}&units=metric`);
                const data = await response.json();
                if (data.cod === '404') {
                    alert('City not found');
                    return;
                }
                displayWeather(data);
                getForecast(data.coord.lat, data.coord.lon);
            } catch (error) {
                console.error('Error fetching weather:', error);
                alert('Error fetching weather data');
            }
            document.getElementById('loading').style.display = 'none';
        }

        async function getForecast(lat, lon) {
            try {
                const response = await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${lat}&lon=${lon}&exclude=current,minutely,hourly&appid=${API_KEY}&units=metric`);
                const data = await response.json();
                displayForecast(data.daily);
            } catch (error) {
                console.error('Error fetching forecast:', error);
            }
        }

        function displayWeather(data) {
    const weatherInfo = document.getElementById('weatherInfo');
    weatherInfo.classList.add('show');  

    document.getElementById('cityName').textContent = data.name;
    document.getElementById('temperature').textContent = `${Math.round(data.main.temp)}°C`;
    document.getElementById('description').textContent = data.weather[0].description;
    document.getElementById('weatherIcon').src = `https://openweathermap.org/img/wn/${data.weather[0].icon}@2x.png`;

    const humidityText = translations[currentLang].humidity;
    const windText = translations[currentLang].wind;
    const cloudCoverText = translations[currentLang].cloudCover;

    document.getElementById('details').textContent = 
        `${humidityText}: ${data.main.humidity}% | ${windText}: ${Math.round(data.wind.speed * 3.6)} km/h | ${cloudCoverText}: ${data.clouds.all}%`;
}

        function displayForecast(dailyData) {
            const forecastDiv = document.getElementById('forecast');
            forecastDiv.innerHTML = '';
            
            dailyData.slice(1, 8).forEach(day => {
                const date = new Date(day.dt * 1000);
                const dayName = date.toLocaleDateString('en-US', { weekday: 'short' });
                
                const dayDiv = document.createElement('div');
                dayDiv.className = 'forecast-day';
                dayDiv.innerHTML = `
                    <div>${dayName}</div>
                    <img src="https://openweathermap.org/img/wn/${day.weather[0].icon}.png" alt="Weather icon">
                    <div>${Math.round(day.temp.max)}°C / ${Math.round(day.temp.min)}°C</div>
                    <div>${day.weather[0].main}</div>
                `;
                forecastDiv.appendChild(dayDiv);
            });
        }

        function suggestLocations(input) {
            const suggestions = document.getElementById('suggestions');
            if (input.length < 3) {
                suggestions.innerHTML = '';
                return;
            }

            const mockSuggestions = [
                `${input} City`,
                `${input} Town`,
                `${input} Village`
            ];

            suggestions.innerHTML = mockSuggestions
                .map(place => `<div class="suggestion-item" onclick="selectSuggestion('${place}')">${place}</div>`)
                .join('');
        }

        function selectSuggestion(place) {
            document.getElementById('searchInput').value = place;
            document.getElementById('suggestions').innerHTML = '';
            searchWeather();
        }

        document.getElementById('searchInput').addEventListener('input', (e) => {
            suggestLocations(e.target.value);
        });

        document.getElementById('searchInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                searchWeather();
            }
        });

        document.addEventListener('click', (e) => {
            if (!e.target.closest('.search-input-group')) {
                document.getElementById('suggestions').innerHTML = '';
            }
        });

        getRandomWeather();
        setInterval(getRandomWeather, 60000);

        let currentLang = 'en'; 

function changeLanguage() {
    currentLang = document.getElementById('language').value;
   
    if (document.getElementById('searchInput').value) {
        searchWeather();
    } else {
        getRandomWeather();
    }
}
async function getRandomWeather() {
    const randomCity = RANDOM_CITIES[Math.floor(Math.random() * RANDOM_CITIES.length)];
    try {
        const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${randomCity}&appid=${API_KEY}&units=metric&lang=${currentLang}`);
        const data = await response.json();
        document.getElementById('randomWeather').innerHTML = `
            ${randomCity}: ${Math.round(data.main.temp)}°C, ${data.weather[0].description}
        `;
    } catch (error) {
        console.error('Error fetching random weather:', error);
    }
}

async function searchWeather() {
    const city = document.getElementById('searchInput').value;
    if (!city) return;

    document.getElementById('loading').style.display = 'block';
    try {
        const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${API_KEY}&units=metric&lang=${currentLang}`);
        const data = await response.json();
        if (data.cod === '404') {
            alert('City not found');
            return;
        }
        displayWeather(data);
        getForecast(data.coord.lat, data.coord.lon);
    } catch (error) {
        console.error('Error fetching weather:', error);
        alert('Error fetching weather data');
    }
    document.getElementById('loading').style.display = 'none';
}

async function getWeatherByCoords(lat, lon) {
    try {
        const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric&lang=${currentLang}`);
        const data = await response.json();
        displayWeather(data);
        getForecast(lat, lon);
    } catch (error) {
        console.error('Error fetching weather:', error);
        alert('Error fetching weather data');
    }
    document.getElementById('loading').style.display = 'none';
}
const translations = {
    en: {
        slogan: 'The Only Weather Forecast You Need',
        humidity: 'Humidity',
        wind: 'Wind',
        cloudCover: 'Cloud cover',
        searchPlaceholder: 'Enter city name...',
        weatherNotFound: 'City not found',
        error: 'Error fetching weather data',
        useCurrentLocation: 'Use current location',
    },
    vi: {
        slogan: 'Dự báo thời tiết duy nhất bạn cần',
        humidity: 'Độ ẩm',
        wind: 'Gió',
        cloudCover: 'Tỉ lệ mây',
        searchPlaceholder: 'Nhập tên thành phố...',
        weatherNotFound: 'Không tìm thấy thành phố',
        error: 'Lỗi khi lấy dữ liệu thời tiết',
        useCurrentLocation: 'Sử dụng vị trí hiện tại',
    },
    fr: {
        slogan: 'La seule prévision météo dont vous avez besoin',
        humidity: 'Humidité',
        wind: 'Vent',
        cloudCover: 'Couverture nuageuse',
        searchPlaceholder: 'Entrez le nom de la ville...',
        weatherNotFound: 'Ville non trouvée',
        error: 'Erreur lors de la récupération des données météo',
        useCurrentLocation: 'Utiliser la localisation actuelle',
    },
    zh: {
        slogan: '您需要的唯一天气预报',
        humidity: '湿度',
        wind: '风速',
        cloudCover: '云覆盖',
        searchPlaceholder: '请输入城市名称...',
        weatherNotFound: '未找到城市',
        error: '获取天气数据时出错',
        useCurrentLocation: '使用当前定位',
    },
};


function updateText(language) {
    document.querySelector('.slogan').textContent = translations[language].slogan;
    document.querySelector('input[type="text"]').placeholder = translations[language].searchPlaceholder;
    document.querySelector('.gps-button').title = translations[language].useCurrentLocation;

}

function changeLanguage() {
    currentLang = document.getElementById('language').value;
    updateText(currentLang);
    updateWeatherInfoLabels(currentLang); 
    if (document.getElementById('searchInput').value) {
        searchWeather();
    } else {
        getRandomWeather();
    }
}

function updateWeatherInfoLabels(language) {
    const humidityText = translations[language].humidity;
    const windText = translations[language].wind;
    const cloudCoverText = translations[language].cloudCover;

    const weatherDetails = document.getElementById('details');
    weatherDetails.textContent = `${humidityText}: --% | ${windText}: -- km/h | ${cloudCoverText}: --%`;
}

    </script>
</body>
</html>
